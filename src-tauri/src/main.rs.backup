mod app_scaffold;
mod auth;
mod commands;
mod components;
mod crypto;
mod db;
mod firebase;
mod github;
mod gpg;
mod llm;
mod oauth_server;
mod services;
mod ssl;
mod state;
mod terminal;
mod updater;
mod version;
mod webdav;
mod webview_oauth;

use crate::components::app::App;
use dioxus::prelude::*;

fn main() {
    dotenv::from_filename(".env.local").ok();
    env_logger::init();

    // Initialize OAuth callback server in background
    // This spawns the server in a separate thread with its own Tokio runtime
    oauth_server::start_oauth_server();

    // Launch using Dioxus Desktop launcher
    dioxus_desktop::launch::launch(app, Default::default(), Default::default());
}

fn app() -> Element {
    rsx! { App { } }
}
